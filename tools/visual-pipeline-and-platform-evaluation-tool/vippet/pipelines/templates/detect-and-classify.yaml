name: Detect & Classify
definition: >
  Template pipeline with object detection followed by classification.
  Configure the input source, detection model, and classification model to get started.
tags:
  - template
  - detection
  - classification
variants:
  - name: CPU
    pipeline_description: >-
      filesrc location="" !
      decodebin3 !
      queue !
      gvadetect
        device=CPU
        model=""
        pre-process-backend=opencv
        batch-size=1
        inference-interval=3
        threshold=0.5
        model-instance-id=detect-cpu !
      queue !
      gvatrack tracking-type=short-term-imageless config=tracking_per_class=false !
      queue !
      gvaclassify
        device=CPU
        model=""
        pre-process-backend=opencv
        batch-size=1
        inference-interval=3
        inference-region=1
        model-instance-id=classify-cpu !
      queue !
      gvafpscounter starting-frame=100 !
      gvawatermark !
      fakesink name=default_output_sink sync=false async=false
  - name: GPU
    pipeline_description: >-
      filesrc location="" !
      decodebin3 !
      queue !
      gvadetect
        device=GPU
        model=""
        pre-process-backend=va-surface-sharing
        nireq=2
        ie-config=NUM_STREAMS=2
        batch-size=1
        inference-interval=3
        threshold=0.5
        model-instance-id=detect-gpu !
      queue !
      gvatrack tracking-type=short-term-imageless config=tracking_per_class=false !
      queue !
      gvaclassify
        device=GPU
        model=""
        pre-process-backend=va-surface-sharing
        nireq=2
        ie-config=NUM_STREAMS=2
        batch-size=1
        inference-interval=3
        inference-region=1
        model-instance-id=classify-gpu !
      queue !
      gvafpscounter starting-frame=100 !
      gvawatermark !
      fakesink name=default_output_sink sync=false async=false
  - name: NPU
    pipeline_description: >-
      filesrc location="" !
      decodebin3 !
      queue !
      gvadetect
        device=NPU
        model=""
        pre-process-backend=opencv
        nireq=4
        batch-size=1
        inference-interval=3
        threshold=0.5
        model-instance-id=detect-npu !
      queue !
      gvatrack tracking-type=short-term-imageless config=tracking_per_class=false !
      queue !
      gvaclassify
        device=NPU
        model=""
        pre-process-backend=opencv
        nireq=4
        batch-size=1
        inference-interval=3
        inference-region=1
        model-instance-id=classify-npu !
      queue !
      gvafpscounter starting-frame=100 !
      gvawatermark !
      fakesink name=default_output_sink sync=false async=false
  - name: GPU_NPU
    pipeline_description: >-
      filesrc location="" !
      decodebin3 !
      queue !
      gvadetect
        device=GPU
        model=""
        pre-process-backend=va-surface-sharing
        nireq=2
        ie-config=NUM_STREAMS=2
        batch-size=1
        inference-interval=3
        threshold=0.5
        model-instance-id=detect-gpu !
      queue !
      gvatrack tracking-type=short-term-imageless config=tracking_per_class=false !
      queue !
      gvaclassify
        device=NPU
        model=""
        pre-process-backend=opencv
        nireq=4
        batch-size=1
        inference-interval=3
        inference-region=1
        model-instance-id=classify-npu !
      queue !
      gvafpscounter starting-frame=100 !
      gvawatermark !
      fakesink name=default_output_sink sync=false async=false
